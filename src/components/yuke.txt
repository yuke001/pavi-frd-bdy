

/* 1. The Sneak Peek Button Positioning */
.small-sneak-btn {
  position: absolute; 
  right: 0;
  bottom: 50px; /* Moved from top: 70% to bottom: 50px */
  background: #ec8bab;
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 20px 0 0 20px;
  font-size: 0.8rem;
  font-weight: bold;
  cursor: pointer;
  z-index: 100;
  box-shadow: -2px 4px 10px rgba(0, 0, 0, 0.2);
}

/* 2. The Modal Overlay - THIS MUST BE FIXED */
.modal-overlay {
  position: fixed; /* Fixes it to the screen */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85); /* Darker background */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999; /* Higher than everything else */
  backdrop-filter: blur(5px);
}

/* 3. The Modal Content */
.modal-content {
  background: white;
  padding: 30px;
  border-radius: 25px;
  max-width: 320px;
  width: 85%;
  text-align: center;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  color: #333;
}

.modal-emoji {
  font-size: 3rem;
  margin-bottom: 10px;
}

.modal-content h3 {
  color: #e91e63;
  margin-bottom: 15px;
}

.modal-content p {
  line-height: 1.5;
  margin-bottom: 20px;
}

.modal-close {
  background: #e91e63;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 50px;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
}



---------------


import { gsap } from "gsap";
import { useEffect, useRef, useState } from "react";
import Confetti from "./Confetti";
import "./MessageCard.css";

function MessageCard({ isActive }) {
  const [curtainsOpened, setCurtainsOpened] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);
  const prevIsActive = useRef(isActive);

  const curtainLeftRef = useRef(null);
  const curtainRightRef = useRef(null);
  const curtainHintRef = useRef(null);
  const messageContentRef = useRef(null);

  const message = `Charu....ðŸ’™,

   I hope today brings you the kind of happiness you quietly bring into other peopleâ€™s lives â€” especially mine. ðŸŒ¼ðŸ’«

   Happy Birthday to a sweet soul ðŸŽ‰ðŸ’– You deserve every good thing that comes your way. Have a blast! ðŸŽ‚âœ¨

   Iâ€™m really grateful for you and everything weâ€™ve shared ðŸ¤ðŸŒ¿ Youâ€™re truly special to me.



Happy Birthday! ðŸŽ‰

â€” yuke...ðŸ¥°ðŸ¥°ðŸ¥°`;

  // Handle page transitions
  useEffect(() => {
    // Only trigger on transition to active
    if (isActive && !prevIsActive.current) {
      setTimeout(() => setShowConfetti(true), 10);
      const timer = setTimeout(() => setShowConfetti(false), 5000);
      prevIsActive.current = isActive;
      return () => clearTimeout(timer);
    }

    // Reset curtains when leaving page with smooth animation
    if (!isActive && prevIsActive.current) {
      setTimeout(() => {
        setCurtainsOpened(false);

        // Smooth reset animation
        if (curtainLeftRef.current && curtainRightRef.current) {
          const resetTimeline = gsap.timeline();

          resetTimeline.to([curtainLeftRef.current, curtainRightRef.current], {
            opacity: 1,
            duration: 0.3,
          });

          resetTimeline.to(
            [curtainLeftRef.current, curtainRightRef.current],
            {
              x: "0%",
              rotationY: 0,
              duration: 0.5,
              ease: "power2.inOut",
            },
            0.3,
          );
        }

        if (messageContentRef.current) {
          gsap.to(messageContentRef.current, {
            opacity: 0,
            scale: 0.9,
            duration: 0.3,
          });
        }
      }, 300);
    }

    prevIsActive.current = isActive;
    return undefined;
  }, [isActive]);

  const handleOpenCurtains = () => {
    if (!curtainsOpened) {
      setCurtainsOpened(true);

      // Detect screen size for responsive animations
      const isMobile = window.innerWidth <= 768;
      const isSmallMobile = window.innerWidth <= 480;

      // Adjust animation parameters based on screen size
      const duration = isSmallMobile ? 1.2 : isMobile ? 1.4 : 1.5;
      const rotationAngle = isSmallMobile ? 10 : isMobile ? 12 : 15;

      // Animate curtain hint fade out
      gsap.to(curtainHintRef.current, {
        opacity: 0,
        scale: 0.8,
        duration: 0.4,
        ease: "power2.in",
      });

      // Animate curtains opening with 3D effect
      const timeline = gsap.timeline();

      timeline.to(
        curtainLeftRef.current,
        {
          x: "-100%",
          rotationY: -rotationAngle,
          duration: duration,
          ease: "power3.inOut",
        },
        0,
      );

      timeline.to(
        curtainRightRef.current,
        {
          x: "100%",
          rotationY: rotationAngle,
          duration: duration,
          ease: "power3.inOut",
        },
        0,
      );

      // Fade out curtains
      timeline.to(
        [curtainLeftRef.current, curtainRightRef.current],
        {
          opacity: 0,
          duration: 0.5,
          delay: isMobile ? 0.8 : 1,
        },
        0,
      );

      // Reveal message content with smooth animation
      timeline.to(
        messageContentRef.current,
        {
          opacity: 1,
          scale: 1,
          duration: isMobile ? 0.8 : 1,
          ease: "back.out(1.2)",
          delay: isMobile ? 0.6 : 0.8,
        },
        0,
      );
    }
  };

  // Handle touch events for mobile
  const handleTouchStart = () => {
    if (!curtainsOpened) {
      // Add subtle scale effect on touch
      gsap.to(curtainHintRef.current, {
        scale: 0.95,
        duration: 0.1,
      });
    }
  };

  const handleTouchEnd = () => {
    if (!curtainsOpened) {
      gsap.to(curtainHintRef.current, {
        scale: 1,
        duration: 0.1,
      });
    }
  };

  return (
    <section className="message">
      <h2>ðŸ’Œ A Message From My Heart</h2>

      <div className="curtain-container">
        <div className="curtain-rod"></div>

        <div
          className={`curtain-wrapper ${
            curtainsOpened ? "opened opening" : ""
          }`}
          onClick={handleOpenCurtains}
          onTouchStart={handleTouchStart}
          onTouchEnd={handleTouchEnd}
          role="button"
          tabIndex={curtainsOpened ? -1 : 0}
          aria-label="Click or tap to open the curtains and reveal the birthday message"
          onKeyDown={(e) => {
            if ((e.key === "Enter" || e.key === " ") && !curtainsOpened) {
              e.preventDefault();
              handleOpenCurtains();
            }
          }}
        >
          <div ref={curtainLeftRef} className="curtain curtain-left"></div>
          <div ref={curtainRightRef} className="curtain curtain-right"></div>
          {!curtainsOpened && (
            <div ref={curtainHintRef} className="curtain-hint">
              âœ¨ {window.innerWidth <= 768 ? "Tap" : "Click"} to Open âœ¨
            </div>
          )}
        </div>

        <div
          ref={messageContentRef}
          className="message-content"
          role="article"
          aria-label="Birthday message"
        >
          <p className="typed-text">{message}</p>
        </div>
      </div>

      {showConfetti && <Confetti />}
    </section>
  );
}

export default MessageCard;





----------------

messgscsrd.css



/* Message Card Section */
.message {
  padding: 15px 20px 20px;
  max-width: 700px;
  width: 100%;
  margin: 0 auto;
  opacity: 1;
  transform: translateY(0);
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  height: 100%;
  max-height: 100vh;
  max-height: 100dvh;
  overflow: hidden;
  justify-content: center;
}

.message h2 {
  text-align: center;
  font-size: 1.6rem;
  margin: 10px 0 20px 0;
  padding-top: max(env(safe-area-inset-top), 10px);
  color: #e91e63;
  flex-shrink: 0;
}

/* Curtain container */
.curtain-container {
  position: relative;
  width: 100%;
  max-width: 700px;
  margin: 0 auto;
  height: 450px;
  max-height: 55vh;
  display: flex;
  justify-content: center;
  align-items: center;
  perspective: 1000px;
  flex-shrink: 0;
}

/* Curtain wrapper */
.curtain-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  z-index: 10;
  cursor: pointer;
  transition: opacity 0.5s ease;
}

.curtain-wrapper.opening {
  pointer-events: none;
}

/* Individual curtain panels */
.curtain {
  flex: 1;
  height: 100%;
  position: relative;
  transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  transform-origin: top;
}

.curtain-left {
  background: linear-gradient(to right, #8b0000, #b22222, #dc143c);
  transform-origin: left center;
  box-shadow: 5px 0 20px rgba(0, 0, 0, 0.3);
  border-right: 3px solid rgba(255, 215, 0, 0.3);
}

.curtain-right {
  background: linear-gradient(to left, #8b0000, #b22222, #dc143c);
  transform-origin: right center;
  box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
  border-left: 3px solid rgba(255, 215, 0, 0.3);
}

/* Curtain fabric texture effect */
.curtain::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 10px,
    rgba(0, 0, 0, 0.1) 10px,
    rgba(0, 0, 0, 0.1) 11px
  );
  pointer-events: none;
}

/* Curtain rod/valance at top */
.curtain-rod {
  position: absolute;
  top: -20px;
  left: 0;
  width: 100%;
  height: 20px;
  background: linear-gradient(to bottom, #8b7355, #654321);
  border-radius: 10px;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
  z-index: 11;
}

.curtain-rod::before,
.curtain-rod::after {
  content: "";
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 30px;
  height: 30px;
  background: radial-gradient(circle, #ffd700, #ffa500);
  border-radius: 50%;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.curtain-rod::before {
  left: -15px;
}

.curtain-rod::after {
  right: -15px;
}

/* Opened state */
.curtain-wrapper.opened .curtain-left {
  transform: translateX(-100%) rotateY(-15deg);
}

.curtain-wrapper.opened .curtain-right {
  transform: translateX(100%) rotateY(15deg);
}

/* Click hint on curtains */
.curtain-hint {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 12;
  background: rgba(255, 255, 255, 0.95);
  color: #e91e63;
  padding: 15px 35px;
  border-radius: 50px;
  font-size: 1.2rem;
  font-weight: 600;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  pointer-events: none;
  animation: hintPulse 2s ease-in-out infinite;
  backdrop-filter: blur(10px);
}

@keyframes hintPulse {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.05);
  }
}

.curtain-wrapper.opening .curtain-hint,
.curtain-wrapper.opened .curtain-hint {
  opacity: 0;
  transition: opacity 0.5s ease;
}

/* Message content behind curtains */
.message-content {
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 1s ease 0.8s, transform 1s ease 0.8s;
  position: relative;
  z-index: 1;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.message-content.revealed {
  opacity: 1;
  transform: scale(1);
}

.message-content .typed-text {
  background: rgba(255, 255, 255, 0.95);
  padding: 25px 30px;
  border-radius: 20px;
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
  font-size: 1rem;
  line-height: 1.6;
  color: #333;
  text-align: left;
  border: 2px solid rgba(233, 30, 99, 0.1);
  backdrop-filter: blur(10px);
  white-space: pre-line;
  max-height: 50vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  width: 100%;
  max-width: 650px;
  scrollbar-width: thin;
  scrollbar-color: rgba(233, 30, 99, 0.5) rgba(0, 0, 0, 0.1);
}

/* Custom scrollbar for webkit browsers */
.message-content .typed-text::-webkit-scrollbar {
  width: 6px;
}

.message-content .typed-text::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 10px;
}

.message-content .typed-text::-webkit-scrollbar-thumb {
  background: rgba(233, 30, 99, 0.5);
  border-radius: 10px;
}

.message-content .typed-text::-webkit-scrollbar-thumb:hover {
  background: rgba(233, 30, 99, 0.7);
}

/* Responsive Design */

/* Tablet and smaller laptops */
@media (max-width: 1024px) {
  .message {
    padding: 15px 15px 20px;
    max-width: 650px;
  }

  .curtain-container {
    max-width: 650px;
    height: 400px;
    max-height: 50vh;
  }

  .message h2 {
    font-size: 1.5rem;
    margin: 0 0 12px 0;
  }

  .message-content .typed-text {
    padding: 22px 28px;
    font-size: 0.98rem;
    line-height: 1.6;
    max-height: 42vh;
  }

  .curtain-hint {
    font-size: 1.15rem;
    padding: 14px 30px;
  }
}

/* Mobile landscape and smaller tablets */
@media (max-width: 768px) {
  .message {
    padding: 10px 15px 15px;
    max-width: 100%;
  }

  .curtain-container {
    height: 350px;
    max-height: 45vh;
  }

  .message h2 {
    font-size: 1.4rem;
    margin: 0 0 10px 0;
  }

  .message-content .typed-text {
    padding: 20px 25px;
    font-size: 0.95rem;
    line-height: 1.55;
    max-height: 40vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .curtain-hint {
    font-size: 1.1rem;
    padding: 12px 28px;
  }
}

/* Mobile portrait */
@media (max-width: 600px) {
  .message {
    padding: 15px 10px;
    max-width: 100%;
    margin: 0 auto;
    overflow: hidden;
    justify-content: center;
  }

  .curtain-container {
    max-width: 100%;
    height: 320px;
    max-height: 45vh;
    margin: 0 auto;
  }

  .message h2 {
    font-size: 1.3rem;
    margin: 5px 0 15px 0;
    padding: 0 10px;
  }

  .message-content {
    padding: 12px;
  }

  .message-content .typed-text {
    padding: 18px 20px;
    font-size: 0.9rem;
    line-height: 1.5;
    max-height: 38vh;
    border-radius: 15px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .curtain-hint {
    font-size: 1rem;
    padding: 12px 25px;
    border-radius: 40px;
  }

  .curtain-rod {
    height: 16px;
    top: -16px;
    border-radius: 8px;
  }

  .curtain-rod::before,
  .curtain-rod::after {
    width: 22px;
    height: 22px;
  }

  .curtain-rod::before {
    left: -12px;
  }

  .curtain-rod::after {
    right: -12px;
  }

  /* Optimize curtain animation for mobile */
  .curtain {
    transition: transform 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  /* Adjust perspective for smaller screens */
  .curtain-container {
    perspective: 800px;
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  .message {
    padding: 12px 8px;
    overflow: hidden;
  }

  .curtain-container {
    min-height: 280px;
    margin: 10px auto;
  }

  .message h2 {
    font-size: 1.25rem;
    margin-bottom: 10px;
  }

  .message-content .typed-text {
    padding: 18px 16px;
    font-size: 0.9rem;
    line-height: 1.5;
    max-height: 42vh;
    border-radius: 12px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .curtain-hint {
    font-size: 1rem;
    padding: 12px 24px;
    border-radius: 35px;
  }

  .curtain-rod {
    height: 14px;
    top: -14px;
  }

  .curtain-rod::before,
  .curtain-rod::after {
    width: 20px;
    height: 20px;
  }

  /* Reduce animation complexity on small screens */
  .curtain-wrapper.opened .curtain-left {
    transform: translateX(-100%) rotateY(-10deg);
  }

  .curtain-wrapper.opened .curtain-right {
    transform: translateX(100%) rotateY(10deg);
  }
}

/* Very small mobile devices */
@media (max-width: 360px) {
  .message {
    padding: 10px 5px;
  }

  .curtain-container {
    min-height: 250px;
  }

  .message h2 {
    font-size: 1.2rem;
  }

  .message-content .typed-text {
    padding: 18px 15px;
    font-size: 0.9rem;
    line-height: 1.45;
  }

  .curtain-hint {
    font-size: 0.95rem;
    padding: 10px 20px;
  }
}

/* Landscape mode optimization for mobile */
@media (max-height: 500px) and (orientation: landscape) {
  .curtain-container {
    min-height: 220px;
  }

  .message-content .typed-text {
    max-height: 60vh;
    padding: 18px 25px;
    font-size: 0.9rem;
  }

  .message h2 {
    font-size: 1.3rem;
    margin-bottom: 8px;
  }

  .curtain-hint {
    font-size: 0.95rem;
    padding: 10px 22px;
  }
}

/* High DPI displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .curtain::before {
    background: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 8px,
      rgba(0, 0, 0, 0.08) 8px,
      rgba(0, 0, 0, 0.08) 9px
    );
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  .curtain-wrapper {
    cursor: default;
  }

  .curtain-hint {
    animation: hintPulseMobile 2.5s ease-in-out infinite;
  }

  @keyframes hintPulseMobile {
    0%,
    100% {
      transform: translate(-50%, -50%) scale(1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.08);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }
  }

  /* Add active state for better touch feedback */
  .curtain-wrapper:active .curtain-hint {
    transform: translate(-50%, -50%) scale(0.95);
  }
}






----------------------